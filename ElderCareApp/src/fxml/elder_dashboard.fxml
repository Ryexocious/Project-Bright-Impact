<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.StackPane?>

<VBox spacing="8" alignment="TOP_CENTER" styleClass="main-container"
      xmlns="http://javafx.com/javafx/23.0.1"
      xmlns:fx="http://javafx.com/fxml/1"
      fx:controller="controller.ElderDashboardController"
      stylesheets="@../styles/elderdash.css">

    <padding>
        <Insets top="8" right="12" bottom="8" left="12"/>
    </padding>

    <!-- Top Row: Welcome (card) + Pairing + Emergency -->
    <HBox spacing="12" VBox.vgrow="NEVER" style="-fx-alignment: center-left;">

        <!-- Welcome card: stretches across available space up to the pairing card -->
        <VBox spacing="3" alignment="CENTER_LEFT" HBox.hgrow="ALWAYS" styleClass="welcome-card-compact">
            <Label fx:id="welcomeLabel" text="Welcome, ..." styleClass="welcome-text-compact"/>
        </VBox>

        <!-- Pairing card immediately left of emergency -->
        <VBox spacing="4" styleClass="pairing-card-compact" alignment="CENTER">
            <Label text="Pairing Code" styleClass="pairing-label-compact"/>
            <Button fx:id="pairingCodeButton" text="Loading..." onAction="#handleShowPairingCode" styleClass="pairing-button-compact" disable="true"/>
            <Label fx:id="copyToastLabel" text="Copied" styleClass="pairing-toast-compact" visible="false"/>
        </VBox>

        <Button fx:id="helpRequestButton" text="EMERGENCY HELP"
                onAction="#handleHelpRequest"
                styleClass="emergency-button-compact"/>
    </HBox>

    <!-- Main Content Row -->
    <HBox spacing="12" VBox.vgrow="ALWAYS" style="-fx-alignment: top-center;">

        <!-- Left: Upcoming Medicines Section -->
        <VBox spacing="8" styleClass="upcoming-medicines-section-compact" HBox.hgrow="ALWAYS" prefWidth="450.0">
            <Label fx:id="upcomingTitleLabel" text="Upcoming Medicines" styleClass="section-title-compact"/>

            <VBox spacing="8" fx:id="medsListBox" VBox.vgrow="ALWAYS">
                <!-- white placeholders that match controller placeholders -->
                <Region prefHeight="60" style="-fx-background-color: white; -fx-background-radius: 8; -fx-border-color:#e6e9ef; -fx-border-radius:8;"/>
                <Region prefHeight="60" style="-fx-background-color: white; -fx-background-radius: 8; -fx-border-color:#e6e9ef; -fx-border-radius:8;"/>
                <Region prefHeight="60" style="-fx-background-color: white; -fx-background-radius: 8; -fx-border-color:#e6e9ef; -fx-border-radius:8;"/>
            </VBox>
        </VBox>

        <!-- Right: Circular Timer -->
        <VBox spacing="8" styleClass="navigation-section-compact actions-section" prefWidth="450.0" HBox.hgrow="NEVER">
            <StackPane fx:id="timerHost" prefWidth="340" prefHeight="340" style="-fx-alignment: center;"/>

            <!-- Only confirm button will show during snooze -->
            <Button fx:id="confirmIntakeButton" text="Confirm intake âœ…"
                    onAction="#handleConfirmIntake" visible="false"
                    style="-fx-font-size: 16px; -fx-background-color: #2ecc71; -fx-text-fill: white;"/>
        </VBox>
    </HBox>

    <!-- Bottom Row: Sign Out -->
    <HBox spacing="5" alignment="CENTER" styleClass="logout-section-compact" VBox.vgrow="NEVER">
        <Button fx:id="logoutButton" text="Sign Out" onAction="#handleLogout" styleClass="logout-button-compact"/>
    </HBox>
</VBox>
