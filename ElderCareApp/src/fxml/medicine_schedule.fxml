<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.geometry.Insets?>
<?import javafx.geometry.Pos?>

<BorderPane xmlns="http://javafx.com/javafx/17"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="controller.MedicineController"
            stylesheets="@../styles/medicine.css"
            prefHeight="600" prefWidth="850">

    <top>
        <HBox alignment="CENTER_LEFT" spacing="8" styleClass="top-bar">
            <Label text="ElderCare â€” Medicine Scheduler" styleClass="header-title"/>
            <Region HBox.hgrow="ALWAYS"/>
            <!-- Close button removed as requested -->
        </HBox>
    </top>

    <center>
        <ScrollPane fx:id="centerScroll" fitToWidth="true" pannable="true" styleClass="main-scroll">
            <content>
                <VBox alignment="TOP_CENTER" spacing="16" styleClass="main-container">

                    <!-- Elder Info & Status -->
                    <HBox alignment="CENTER" spacing="10" styleClass="elder-info-container">
                        <Label fx:id="elderFoundLabel" text="(loading elder...)" styleClass="elder-label"/>
                        <Region HBox.hgrow="ALWAYS"/>
                        <Label fx:id="statusLabel" text="Ready." styleClass="status-label"/>
                    </HBox>

                    <!-- Today's Schedule -->
                    <VBox alignment="TOP_CENTER" spacing="8" styleClass="schedule-container">
                        <Label text="Today's Schedule" styleClass="section-title"/>
                        <ListView fx:id="scheduleListView" styleClass="schedule-list"/>
                    </VBox>

                    <!-- Add Medicine Section -->
                    <VBox alignment="TOP_CENTER" spacing="12" styleClass="form-container">

                        <Label text="Add Medicine" styleClass="section-title"/>

                        <!-- Medicine Info Form -->
                        <GridPane hgap="10" vgap="8" styleClass="form-grid">
                            <columnConstraints>
                                <ColumnConstraints percentWidth="30"/>
                                <ColumnConstraints percentWidth="70"/>
                            </columnConstraints>

                            <Label text="Name:" GridPane.rowIndex="0" GridPane.columnIndex="0" styleClass="form-label"/>
                            <TextField fx:id="medicineNameField" GridPane.rowIndex="0" GridPane.columnIndex="1" styleClass="form-field"/>

                            <Label text="Type:" GridPane.rowIndex="1" GridPane.columnIndex="0" styleClass="form-label"/>
                            <ComboBox fx:id="medicineTypeCombo" GridPane.rowIndex="1" GridPane.columnIndex="1" styleClass="form-combo"/>

                            <Label text="Pills / dose:" GridPane.rowIndex="2" GridPane.columnIndex="0" styleClass="form-label"/>
                            <Spinner fx:id="pillsPerDoseSpinner" GridPane.rowIndex="2" GridPane.columnIndex="1" styleClass="form-spinner"/>

                            <Label text="Syrup ml / dose:" GridPane.rowIndex="3" GridPane.columnIndex="0" styleClass="form-label"/>
                            <Spinner fx:id="syrupMlPerDoseSpinner" GridPane.rowIndex="3" GridPane.columnIndex="1" styleClass="form-spinner"/>

                            <Label text="Units / dose:" GridPane.rowIndex="4" GridPane.columnIndex="0" styleClass="form-label"/>
                            <Spinner fx:id="unitsPerDoseSpinner" GridPane.rowIndex="4" GridPane.columnIndex="1" styleClass="form-spinner"/>
                        </GridPane>

                        <Separator styleClass="form-separator"/>

                        <!-- Active Date Range -->
                        <HBox spacing="10" alignment="CENTER_LEFT" styleClass="date-range-container">
                            <Label text="Active from:" styleClass="form-label"/>
                            <DatePicker fx:id="startDatePicker" styleClass="form-datepicker"/>
                            <Label text="to" styleClass="form-label"/>
                            <DatePicker fx:id="endDatePicker" styleClass="form-datepicker"/>
                            <Region HBox.hgrow="ALWAYS"/>
                        </HBox>

                        <Separator styleClass="form-separator"/>

                        <!-- Time Picker Section -->
                        <VBox spacing="8" alignment="CENTER_LEFT" styleClass="time-section">
                            <HBox spacing="8" alignment="CENTER_LEFT" styleClass="time-controls">
                                <Label text="Time (1-hour steps):" styleClass="form-label"/>
                                <ComboBox fx:id="timePickerCombo" prefWidth="100" styleClass="form-combo"/>
                                <Button fx:id="addTimeButton" text="Add Time" styleClass="primary-button" minWidth="80"/>
                                <Button fx:id="removeTimeButton" text="Remove" styleClass="secondary-button" minWidth="80"/>
                                <Button fx:id="clearTimesButton" text="Clear All" styleClass="secondary-button" minWidth="80"/>
                                <Region HBox.hgrow="ALWAYS"/>
                            </HBox>
                            <ListView fx:id="timesListView" prefHeight="120" styleClass="times-list"/>
                        </VBox>
                    </VBox>
                </VBox>
            </content>
        </ScrollPane>
    </center>

    <bottom>
        <HBox spacing="10" alignment="CENTER_RIGHT" styleClass="button-container">
            <Region HBox.hgrow="ALWAYS"/>
            <Button fx:id="saveButton" text="Save Medicine" styleClass="success-button" minWidth="100"/>
            <Button fx:id="backButton" text="Back" styleClass="danger-button" minWidth="80"/>
        </HBox>
    </bottom>
</BorderPane>
